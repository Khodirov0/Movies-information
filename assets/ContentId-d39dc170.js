import{d as C,e as F,f as R,l as B,h as S,C as w,g as k,r as V,i as p,a,q as f,z as D,x as y,c as u,j as e,b,B as T,t as _,F as x,p as I,s as z,k as h,D as U,E,T as G,G as L,H as N,w as j,y as A,A as M,m as q,I as H,o as J,J as O}from"./index-95bdbdba.js";const P=C("videos",{state:()=>({movie:null,tv:null}),actions:{async getVideos(t,n){try{if(t!=="movie"&&t!=="tv"){console.error("Invalid type:",t);return}const s=(await F({method:"GET",url:`${R}/${t}/${n}/videos?language=${B}`,headers:S})).data.results||[];if(s.length===0){console.warn("No videos found");return}t==="movie"?this.movie=s[s.length-1]:this.tv=s[s.length-1]}catch(i){console.error("Error in videos.js:",i)}}}}),Y=C("recommendation",{state:()=>({movie:null,tv:null}),actions:{async getRecommendation(t,n,i=1){try{const l=(await F({method:"GET",url:`${R}/${t}/${n}/recommendations?language=${B}&page=${i}`,headers:S})).data.results||[],c=[];l.forEach(d=>{(d.vote_average||0)>=6&&c.length<4&&c.push(d)}),t==="movie"?this.movie=c:this.tv=c}catch(s){console.error("Error in useRecommendation:",s)}}}}),K={key:0,class:"content-id__intro"},Q=["src"],W={class:"content-id__intro-block"},X={class:"content-id__intro-left"},Z={class:"content-id__intro-left-title"},tt={class:"content-id__intro-left-overview"},et={class:"content-id__intro-left-data"},nt={style:{"margin-right":"15px","font-weight":"700"}},ot={key:0},st={class:"runtime"},it={class:"content-id__intro-buttons"},ct={class:"content-id__intro-right"},at=["src"],rt={class:"content-id__intro-actors"},lt={class:"content-id__intro-actors-cast"},dt={key:1,class:"content-id__intro"},ut=["src"],_t={__name:"IntroId",props:["type","content","video"],setup(t){const n=w(),i=t,s=k(()=>{let d=i.content.runtime%60,o=Math.floor(i.content.runtime/60);return o?`${o}ч ${d}м`:` ${d}м`}),l=()=>{n.go(-1)};let c=V(!1);return(d,o)=>{const m=p("font-awesome-icon"),v=p("trailer-btn"),$=p("actors");return a(),f(G,{name:"content-id__intro",mode:"out-in"},{default:D(()=>[t.content&&!y(c)?(a(),u("div",K,[e("button",{class:"content-id__close",onClick:l},[b(m,{icon:"times"})]),e("img",{src:y(T)+t.content.backdrop_path,alt:"",class:"content-id__intro-bg"},null,8,Q),e("div",W,[e("div",X,[e("h2",Z,_(t.content.title||t.content.name),1),e("p",tt,_(t.content.overview),1),e("p",et,[e("span",nt,_(t.content.vote_average.toFixed(1)),1),e("span",null,_(new Date(t.content.first_air_date||t.content.release_date).getFullYear())+", ",1),(a(!0),u(x,null,I(t.content.genres.slice(0,3),(r,g)=>(a(),u("span",{key:r.id},[z(_(r.name)+" ",1),g<t.content.genres.slice(0,3).length-1?(a(),u("span",ot,", ")):h("",!0)]))),128)),e("span",st,_(t.content.runtime?s.value:""),1)]),e("div",it,[t.video?(a(),f(v,{key:0,onClick:o[0]||(o[0]=r=>U(c)?c.value=!0:c=!0),type:t.type,id:t.content.id},null,8,["type","id"])):h("",!0)])]),e("div",ct,[e("img",{src:y(E)+t.content.poster_path,alt:"",class:"content-id__intro-poster"},null,8,at)]),e("div",rt,[o[1]||(o[1]=e("h2",{class:"content-id__intro-actors-title"},"Starring",-1)),e("div",lt,[b($,{type:t.type,id:t.content.id,count:6},null,8,["type","id"])])])])])):y(c)?(a(),u("div",dt,[t.video?(a(),u("iframe",{key:0,src:`https://www.youtube.com/embed/${t.video.key}?rel=0&controls=1&autoplay=1`,title:"Видео",frameborder:"0",allow:"autoplay",allowfullscreen:""},null,8,ut)):h("",!0),e("button",{class:"content-id__close content-id__video-close",onClick:l},[b(m,{icon:"times"})])])):h("",!0)]),_:1})}}},mt={class:"content-id__budget"},vt={class:"content-id__budget-items"},ht={class:"content-id__budget-item-title"},gt={class:"content-id__budget-item-text"},yt={__name:"BudgetId",props:["content","type"],setup(t){var o,m,v;const n=t,i=((o=n.content.budget)==null?void 0:o.toLocaleString())||"0",s=((m=n.content.revenue)==null?void 0:m.toLocaleString())||"0",l=((v=n.content)==null?void 0:v.status)||"N/A",c=n.content.original_title||n.content.original_name,d=L([{id:1,title:"Budget",text:`$ ${i}`},{id:2,title:"Fees",text:`$ ${s}`},{id:3,title:"Status",text:l},{id:4,title:"Original title",text:c}]);return($,r)=>(a(),u("div",mt,[e("div",vt,[(a(!0),u(x,null,I(d,g=>(a(),u("div",{class:"content-id__budget-item",key:g.id},[e("h2",ht,_(g.title),1),e("p",gt,_(g.text),1)]))),128))])]))}},ft={key:0,class:"content-id__recom"},$t={class:"container"},pt={class:"content-id__recom-title"},kt={class:"content-id__recom-list"},bt={alt:"",loading:"lazy"},wt={__name:"RecomId",props:["recomId","type"],setup(t){const n=t,i=N(),s=w(),l=o=>o>=8?{backgroundColor:"#e1c171",border:"2px solid white",color:"black"}:o>6.9?{backgroundColor:"green"}:{backgroundColor:"grey"},c=o=>o.toFixed(1),d=o=>{i.params.id!==o.toString()&&s.push(`/${n.type}/${o}`).then(()=>{location.reload()})};return j(()=>i.params.id,()=>{location.reload()}),(o,m)=>{const v=p("router-link"),$=A("lazy");return t.recomId?(a(),u("div",ft,[e("div",$t,[e("h2",pt,_(t.recomId.length>0?"Recommended":"No recommended"),1),e("div",kt,[(a(!0),u(x,null,I(t.recomId,r=>(a(),f(v,{class:"content-id__recom-item",key:r.id,to:`/${t.type}/${r.id}`,vote_average:r.vote_average,onClick:g=>d(r.id)},{default:D(()=>[e("p",{style:M(l(r.vote_average))},_(c(r.vote_average)),5),q(e("img",bt,null,512),[[$,y(E)+r.poster_path]]),e("h2",null,_(r.title||r.name),1)]),_:2},1032,["to","vote_average","onClick"]))),128))])])])):h("",!0)}}},xt={key:0,class:"content-id"},It={class:"content-id__box"},Ft={__name:"ContentId",props:["type"],setup(t){const n=t,i=H(),s=P(),l=Y(),c=N();w();const d=k(()=>n.type=="movie"?i.movieId:i.tvId),o=k(()=>n.type=="movie"?s.movie:s.tv),m=k(()=>n.type=="movie"?l.movie:l.tv);return J(()=>{setTimeout(async()=>{await i.getDetails(n.type,c.params.id),await s.getVideos(n.type,c.params.id),await l.getRecommendation(n.type,c.params.id)},500)}),O(()=>{n.type=="movie"?i.movieId=null:i.tvId=null,n.type=="movie"?s.movie=null:s.tv=null,n.type=="movie"?l.movie=null:l.tv=null}),(v,$)=>{const r=p("loader");return d.value?(a(),u("section",xt,[e("div",It,[b(_t,{type:t.type,content:d.value,video:o.value},null,8,["type","content","video"]),d.value?(a(),f(yt,{key:0,content:d.value},null,8,["content"])):h("",!0),y(l)&&m.value?(a(),f(wt,{key:1,type:t.type,recomId:m.value},null,8,["type","recomId"])):h("",!0)])])):(a(),f(r,{key:1}))}}};export{Ft as _};
